<?xml version="1.0" encoding="UTF-8"?>
<job xmlns="urn:proactive:jobdescriptor:dev" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:proactive:jobdescriptor:dev ../../src/scheduler/src/org/ow2/proactive/scheduler/common/xml/schemas/jobdescriptor/dev/schedulerjob.xsd" name="workflow-nop" priority="normal" cancelJobOnError="true">
    <variables>
        <variable name="variable1" value=""/>
        <variable name="variable2" value=""/>
    </variables>
    <genericInformation>
        <info name="genericInformation1" value=""/>
        <info name="genericInformation2" value=""/>
    </genericInformation>

	<taskFlow>
        <task name="nop-task">
            <inputFiles>
                <files includes="*" accessMode="transferFromUserSpace"/>
            </inputFiles>
            <scriptExecutable>
                <script >
                    <code language="groovy">
                        <![CDATA[
                        import groovy.json.JsonOutput

                        def variable1 = "${variable1}"
                        def variable2 = "${variable2}"

                        println "Variables provided: "
                        println "variable1='$variable1'"
                        println "variable2='$variable2'"

                        def files = (new File(new URI(localspace.getRealURI()))).list()
                        println "localspace=$files"

                        def json = [:]
                        json.put("variable1", variable1)
                        json.put("variable2", variable2)
                        json.put("localspace", files)

                        result = JsonOutput.toJson(json)

                        println "Result: $result"
                        ]]>
                    </code>
                </script>
            </scriptExecutable>
            <outputFiles>
                <files includes="*" accessMode="transferToUserSpace"/>
            </outputFiles>
        </task>
    </taskFlow>
</job>

